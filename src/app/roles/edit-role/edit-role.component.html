<mat-card style="text-align: center">
  <mat-card-title>
    {{ currentRole?.role }} / {{ currentRole?.roleBg }}</mat-card-title
  >
  <mat-card-content>
    <form [formGroup]="editForm" style="width: 100%">
      <div class="f-row">
        <mat-form-field class="two-on-row">
          <input
            matInput
            placeholder="role"
            type="text"
            class="form-control"
            formControlName="role"
            id="role"
            readonly
          />
        </mat-form-field>
        <mat-form-field class="two-on-row">
          <input
            matInput
            placeholder="description"
            type="text"
            class="form-control"
            formControlName="description"
            id="description"
            autocomplete="off"
            required
          />
        </mat-form-field>
        <mat-form-field class="two-on-row">
          <input
            matInput
            placeholder="роля"
            type="text"
            class="form-control"
            formControlName="roleBg"
            id="roleBg"
            autocomplete="off"
            required
          />
        </mat-form-field>
        <mat-form-field class="two-on-row">
          <input
            matInput
            placeholder="описание"
            type="text"
            class="form-control"
            formControlName="descriptionBg"
            id="descriptionBg"
            autocomplete="off"
            required
          />
        </mat-form-field>
      </div>

      <h3>{{ 'wl.menus' | translate }}</h3>

      <div class="table-holder mat-elevation-z8">
        <!-- selected menus (left table)-->
        <table
          mat-table
          #table
          class="left_table"
          [dataSource]="menus.controls"
          formArrayName="menus"
        >
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          <ng-container matColumnDef="menu">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'wl.role_menu' | translate }}
            </th>
            <td
              mat-cell
              *matCellDef="let menu; let i = index"
              [formGroupName]="i"
            >
              {{ menu.value.value | translate }}
            </td>
          </ng-container>
          <ng-container matColumnDef="add">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'wl.role_add_check' | translate }}
            </th>
            <td
              mat-cell
              *matCellDef="let menu; let i = index"
              [formGroupName]="i"
              style="width: 80px"
            >
              <mat-checkbox
                formControlName="add"
                (change)="removePreviewCheck(menu)"
              ></mat-checkbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'wl.role_edit_check' | translate }}
            </th>
            <td
              mat-cell
              *matCellDef="let menu; let i = index"
              [formGroupName]="i"
              style="width: 80px"
            >
              <mat-checkbox
                formControlName="edit"
                (change)="removePreviewCheck(menu)"
              ></mat-checkbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'wl.role_remove_check' | translate }}
            </th>
            <td
              mat-cell
              *matCellDef="let menu; let i = index"
              [formGroupName]="i"
              style="width: 80px"
            >
              <mat-checkbox
                formControlName="delete"
                (change)="removePreviewCheck(menu)"
              ></mat-checkbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="preview">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'wl.role_preview_check' | translate }}
            </th>
            <td
              mat-cell
              *matCellDef="let menu; let i = index"
              [formGroupName]="i"
              style="width: 80px"
            >
              <mat-checkbox
                formControlName="preview"
                (change)="previewSelected(menu, $event.checked)"
              >
              </mat-checkbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="remove">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'wl.role_hide_menu' | translate }}
            </th>
            <td
              mat-cell
              *matCellDef="let menu; let i = index"
              [formGroupName]="i"
            >
              <button
                type="button"
                class="pepe-table-button"
                mat-raised-button
                (click)="removeMenu(menu.value)"
              >
                <mat-icon class="list-mat-icon">arrow_forward</mat-icon>
              </button>
            </td>
          </ng-container>
        </table>
        <!-- available menus -->
        <table
          mat-table
          #table
          class="right_table"
          [dataSource]="availableMenus.controls"
          formArrayName="available"
        >
          <tr mat-header-row *matHeaderRowDef="displayedColumnsAv"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsAv"></tr>
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'wl.role_menu' | translate }}
            </th>
            <td
              mat-cell
              *matCellDef="let menu; let i = index"
              [formGroupName]="i"
            >
              {{ menu.value.value | translate }}
            </td>
          </ng-container>
          <ng-container matColumnDef="add">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'wl.role_show_menu' | translate }}
            </th>
            <td
              mat-cell
              *matCellDef="let menu; let i = index"
              [formGroupName]="i"
            >
              <button
                type="button"
                class="pepe-table-button"
                mat-raised-button
                (click)="addMenu(menu.value)"
              >
                <mat-icon class="list-mat-icon">arrow_back</mat-icon>
              </button>
            </td>
          </ng-container>
        </table>
        <div class="button-bar">
          <button
            mat-raised-button
            type="button"
            color="primary"
            style="margin-right: 10px"
            (click)="goBack()"
          >
            {{ 'wl.cancel' | translate }}
          </button>
          <button
            mat-raised-button
            type="submit"
            color="primary"
            (click)="onSubmit()"
          >
            {{ 'wl.save' | translate }}
          </button>
        </div>
      </div>
    </form>
  </mat-card-content>
</mat-card>
<!-- <pre>{{currentRole.menus | json}}</pre> -->
